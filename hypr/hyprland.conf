# GENERAL
## Monitor
monitor = ,preferred,auto,auto

## Variables
$config  = $HOME/.config/hypr
$scripts = $config/scripts
$comp    = $config/components

$terminal    = kitty
$fileManager = thunar
$menu        = wofi --show drun

## Autostart
exec-once = $scripts/autostart.sh -s
exec      = $scripts/autostart.sh -r

## TODO: theme
source = $config/mocha.conf

## Environment
env = QT_STYLE_OVERRIDE,kvantum
env = SAL_USE_VCLPLUGIN,gtk3
env = MOZ_ENABLE_WAYLAND,1
env = GDK_BACKEND,wayland,x11
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_QPA_PLATFORMTHEME,qt5ct
env = _JAVA_OPTIONS,'-Dawt.useSystemAAFontSettings=on'
#env = QT_QPA_PLATFORM,wayland;xcb

## Configuration
general {
  border_size = 2
  no_border_on_floating = false
  gaps_in = 5
  gaps_out = 10
  col.inactive_border = rgb($overlay1)
  col.active_border = rgb($mauve)

  layout = master #dwindle

  no_focus_fallback = true
  resize_on_border = false
}

decoration {
  rounding = 10

  active_opacity = 0.9
  inactive_opacity = 0.7
  fullscreen_opacity = 1.0

  drop_shadow = true
  shadow_range = 30
  shadow_render_power = 2
  shadow_ignore_window = true
  col.shadow = rgba(00000060)
  #col.shadow_inactive = 
  shadow_offset = 0, 0
  shadow_scale = 1

  dim_inactive = false
  dim_strength = 0.5
  dim_special  = 0.2

  blur {
    enabled = true

    size       = 8
    passes     = 3
    ignore_opacity = true
    xray       = true
    noise      = 0.06
    contrast   = 1
    brightness = 1
    vibrancy   = 1
    vibrancy_darkness = 0
    special    = false
    popups     = false
    popups_ignorealpha = 0.2
  }
}

animations {
  enabled = true

  bezier = overshot, 0.05, 0.9, 0.1, 1.1
  bezier = mybezier,  0.46, 0.74, 0.3, 1.15 
  bezier = myBezier, 0.05, 0.9, 0.1, 1.05

  animation = windows, 1, 7, overshot, slide
  animation = windowsOut, 1, 5, default, popin 80%
  animation = windowsMove, 1, 6, overshot
  animation = border, 1 ,10, default
  animation = fade, 1, 10, default
  animation = workspaces, 1, 4, overshot, slide
}

input {
  kb_layout  = br
  kb_model   = abnt2
  kb_options = caps:escape, altwin:menu_win

  numlock_by_default = true
  repeat_rate  = 25
  repeat_delay = 300

  sensitivity   = -0.5
  accel_profile = flat

  scroll_button  = 0
  scroll_button_lock = false
  natural_scroll = false

  follow_mouse   = 1
  focus_on_close = 0
  mouse_refocus  = false
  float_switch_override_focus = 1

  touchpad {
    disable_while_typing = true

    natural_scroll = true
    scroll_factor  = 0.5

    middle_button_emulation = false
    tap-to-click = true
    drag_lock    = false
    tap-and-drag = true
  }
}

gestures {
  workspace_swipe = true
  workspace_swipe_fingers      = 3
  workspace_swipe_min_fingers  = true
  workspace_swipe_distance     = 300
  workspace_swipe_invert       = true
  workspace_swipe_min_speed_to_force = 30
  workspace_swipe_cancel_ratio = 0.25
  workspace_swipe_forever      = true
  workspace_swipe_use_r        = false
}

misc {
  disable_hyprland_logo    = true
  disable_splash_rendering = false
  col.splash = 0xffffffff

  font_family = Inter

  mouse_move_enables_dpms = true
  key_press_enables_dpms  = true

  always_follow_on_dnd      = true
  layers_hog_keyboard_focus = true

  animate_manual_resizes       = false
  animate_mouse_windowdragging = false

  focus_on_activate = false

  allow_session_lock_restore = true

  close_special_on_empty = true

  new_window_takes_over_fullscreen = 2
  exit_window_retains_fullscreen   = false
}

binds {
  scroll_event_delay    = 30

  workspace_back_and_forth = false
  allow_workspace_cycles   = true

  window_direction_monitor_fallback = true
}

cursor {
  sync_gsettings_theme = true
  inactive_timeout = 5
  hide_on_key_press = true

  no_warps = false
  warp_on_change_workspace = false

  enable_hyprcursor = true
}
 
### Tiling
dwindle {
  force_split = 2
  preserve_split = false
  smart_split = false
  use_active_for_splits = true
  default_split_ratio = 1.0
  split_bias = 1

  special_scale_factor = 0.9
}

master {
  allow_small_split = false
  mfact = 0.6
  orientation = left
  drop_at_cursor = true

  new_status = slave
  new_on_top = false
  new_on_active = none

  special_scale_factor = 0.9
}

## Keys

$mainMod = SUPER
$secMod  = ALT

### Terminal
# tiled
bind = $mainMod, Return, exec, kitty
# floating
bind = $mainMod SHIFT, Return, exec, kitty --class kitty-float

### Hyprland
bind = $mainMod SHIFT, R, exec, hyprctl reload
bind = $mainMod, C, killactive,
# Toggle scratchpad
bind = $mainMod, S, togglespecialworkspace,
# Move to scratchpad
bind = $mainMod SHIFT, S, movetoworkspace, special

bind = $mainMod, F, fullscreen
# Fake fullscreen
bind = $mainMod $secMod, F, fullscreen, 1
bind = $mainMod, Space, togglefloating,
bind = $mainMod, P, pin,
# Invert split direction(horizontal/vertical)
#bind = $mainMod, Z, togglesplit,
# Color Picker
bind = $mainMod SHIFT, C, exec, hyprpicker -a
bind = $mainMod, G, exec, $scripts/gamemode.sh
# Cycle windows
bind = $secMod, Tab, cyclenext,
bind = $secMod, Tab, bringactivetotop,
bind = $secMod SHIFT, Tab, cyclenext, prev
bind = $secMod SHIFT, Tab, bringactivetotop,
# Cycle worckspaces
bind = $mainMod, Tab, workspace, e+1
bind = $mainMod SHIFT, Tab, workspace, e-1
bind = $mainMod CTRL, Tab, workspace, previous
# Change monitor
#bind = $mainMod $secMod, left, focusmonitor,1
#bind = $mainMod $secMod, right, focusmonitor,0
# Change focus
bind = $mainMod, left, movefocus, l
bind = $mainMod, down, movefocus, d
bind = $mainMod, up, movefocus, u
bind = $mainMod, right, movefocus, r
# Change focus (vim)
bind = $mainMod, h, movefocus, l
bind = $mainMod, j, movefocus, d
bind = $mainMod, k, movefocus, u
bind = $mainMod, l, movefocus, r
# Move focused window
bind = $mainMod SHIFT, left, movewindow, l
bind = $mainMod SHIFT, down, movewindow, d
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, right, movewindow, r
# Move focused window (vim)
bind = $mainMod SHIFT, h, movewindow, l
bind = $mainMod SHIFT, j, movewindow, d
bind = $mainMod SHIFT, k, movewindow, u
bind = $mainMod SHIFT, l, movewindow, r
# Resize focused window
bindle = $mainMod CTRL, left, resizeactive, -15 0
bindle = $mainMod CTRL, down, resizeactive, 0 15
bindle = $mainMod CTRL, up, resizeactive, 0 -15
bindle = $mainMod CTRL, right, resizeactive, 15 0
# Resize focused window (vim)
bindle = $mainMod CTRL, h, resizeactive, -15 0
bindle = $mainMod CTRL, j, resizeactive, 0 15
bindle = $mainMod CTRL, k, resizeactive, 0 -15
bindle = $mainMod CTRL, l, resizeactive, 15 0
# Switch workspaces with $mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10
#bind = $mainMod, 1, focusmonitor, 1
#bind = $mainMod, 2, focusmonitor, 1
#bind = $mainMod, 3, focusmonitor, 1
#bind = $mainMod, 4, focusmonitor, 1
#bind = $mainMod, 5, focusmonitor, 1
#bind = $mainMod, 6, focusmonitor, 0
#bind = $mainMod, 7, focusmonitor, 0
#bind = $mainMod, 8, focusmonitor, 0
#bind = $mainMod, 9, focusmonitor, 0
#bind = $mainMod, 0, focusmonitor, 0
# Move active window to a workspace with $mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10
#bind = $mainMod SHIFT, 1, movecurrentworkspacetomonitor, 1
#bind = $mainMod SHIFT, 2, movecurrentworkspacetomonitor, 1
#bind = $mainMod SHIFT, 3, movecurrentworkspacetomonitor, 1
#bind = $mainMod SHIFT, 4, movecurrentworkspacetomonitor, 1
#bind = $mainMod SHIFT, 5, movecurrentworkspacetomonitor, 1
#bind = $mainMod SHIFT, 6, movecurrentworkspacetomonitor, 0
#bind = $mainMod SHIFT, 7, movecurrentworkspacetomonitor, 0
#bind = $mainMod SHIFT, 8, movecurrentworkspacetomonitor, 0
#bind = $mainMod SHIFT, 9, movecurrentworkspacetomonitor, 0
#bind = $mainMod SHIFT, 0, movecurrentworkspacetomonitor, 0
# Scroll through existing workspaces with mouse scroll/next-prev
bind = $mainMod, mouse_down, workspace, e-1
bind = $mainMod, mouse_up, workspace, e+1
bind = $mainMod, mouse:276, workspace, e-1
bind = $mainMod, mouse:275, workspace, e+1
bind = $mainMod SHIFT, mouse_down, workspace, -1
bind = $mainMod SHIFT, mouse_up, workspace, +1
bind = $mainMod SHIFT, mouse:276, workspace, -1
bind = $mainMod SHIFT, mouse:275, workspace, +1
# Move/resize windows with $mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

## TODO: Rofi
#  Application menu
bind = $mainMod, D, exec, rofi -show drun -theme $comp/rofi/launcher.rasi
#bindr=$mainMod,Super_L,exec, rofi -show drun -theme $comp/rofi/launcher.rasi
# Powermenu
bind = $mainMod, X, exec, $scripts/powermenu

## Applications
# Browser
bind = $mainMod SHIFT, W, exec, firefox
# File manager
bind = $mainMod SHIFT, F, exec, thunar
# Obsidian
bind = $mainMod SHIFT, O, exec, obsidian
# Discord
bind = $mainMod SHIFT, D, exec, discord
# Spotify
bind = $mainMod SHIFT, A, exec, spotify

## TODO: CLI Applications
# neovim
bind = $mainMod $secMod, V, exec, kitty nvim

## System
# Lock the screen
bind = $mainMod, รง, exec, $scripts/lock.sh
# Print all the screen
bind = , Print, exec, IMG=$HOME/Pictures/Screenshots/$(date +%y-%m-%d_%H:%M:%S).png && grim $IMG && wl-copy < $IMG && mpv /usr/share/sounds/freedesktop/stereo/screen-capture.oga
# Print the selected area
bind = $mainMod, Print, exec, IMG=$HOME/Pictures/Screenshots/$(date +%y-%m-%d_%H:%M:%S).png && grim -g "$(slurp)" $IMG && wl-copy < $IMG && mpv /usr/share/sounds/freedesktop/stereo/screen-capture.oga
# Volume
bindle = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+ -l 1.0
bindle = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%- -l 1.0
bindle = SHIFT, XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+s
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
# Player
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPrev, exec, playerctl previous
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioStop, exec, playerctl stop
bindl = $mainMod SHIFT, N, exec, playerctl next
bindl = $mainMod SHIFT, P, exec, playerctl previous
bindl = $mainMod SHIFT, Space, exec, playerctl play-pause
# Brightness
bindle = , XF86MonBrightnessUp, exec, brillo -A 5 -q -u 250000
bindle = , XF86MonBrightnessDown, exec, brillo -U 5 -q -u 250000

## Window Rules
### Workspaces
windowrule = workspace 1, kitty
windowrule = monitor 1, kitty

windowrule = workspace 2, firefox
windowrule = monitor 1, firefox

windowrule = workspace 3, thunar
windowrule = workspace 3, qBittorrent
windowrule = monitor 1, thunar
windowrule = monitor 1, qBittorrent

windowrule = workspace 4, VSCodium
windowrule = workspace 4, jetbrains-pycharm-ce
windowrule = workspace 4, jetbrains-studio
windowrule = monitor 1, VSCodium
windowrule = monitor 1, jetbrains-puycharm-ce
windowrule = monitor 1, jetbrains-studio

windowrule = workspace 5, Gimp-2.10
windowrule = workspace 5, obsidian
windowrule = workspace 5, obs
windowrule = monitor 1, Gimp-2.10
windowrule = monitor 1, obsidian
windowrule = monitor 1, obs

windowrule = workspace 7 silent, spotify
windowrule = workspace 7 silent, Spotify
windowrule = monitor 0, spotify
windowrule = monitor 0, Spotify

windowrule = workspace 8, discord
windowrule = workspace 8, ripcord
windowrule = workspace 8, webcord
windowrule = monitor 0, discord
windowrule = monitor 0, ripcord
windowrule = monitor 0, webcord

windowrule = workspace 9, VirtualBox Manager
windowrule = workspace 9, GParted
windowrule = workspace 9, pavucontrol
windowrule = workspace 9, nwg-look
windowrule = workspace 9, blueman-manager
windowrule = monitor 0, VirtualBox Manager
windowrule = monitor 0, GParted
windowrule = monitor 0, pavucontrol
windowrule = monitor 0, nwg-look
windowrule = monitor 0, blueman-manager

### Floating apps
# terminal
windowrule = move center, kitty-float
windowrule = size 800 500, kitty-float
windowrule = animation slide, kitty-full
windowrule = size 418 234, kitty-clock
windowrule = workspace unset, kitty-float
windowrule = float, kitty-float

windowrule = float, file_progress
windowrule = float, confirm
windowrule = float, dialog
windowrule = float, download
windowrule = float, notification
windowrule = float, error
windowrule = float, splash
windowrule = float, confirmreset
windowrule = float, title:Open File
windowrule = float, title:branchdialog
windowrule = float, *.exe
windowrule = float, keepassxc
windowrule = idleinhibit focus, vlc
windowrule = idleinhibit fullscreen, firefox
windowrule = float, thunar
windowrule = float, Viewnior
windowrule = float, VirtualBox Manager
windowrule = float, blueman-manager
windowrule = float, GParted
windowrule = float, Lxappearance
windowrule = float, pavucontrol
windowrule = float, org.kde.polkit-kde-authentication-agent-1
windowrule = tile, Spotify

### Firefox
# Picture in Picture
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = pin, title:^(Picture-in-Picture)$

# Hide Firefox sharing indicator
windowrule = float, title:^(Firefox โ Sharing Indicator)$
windowrule = move 0 0, title:^(Firefox โ Sharing Indicator)$

### Enable/disable effects
layerrule = blur,gtk-layer-shell
layerrule = ignorezero,gtk-layer-shell
layerrule = noanim,gtk-layer-shell
layerrule = blur,waybar
layerrule = ignorezero, waybar
layerrule = xray 1, waybar
layerrule = blur,rofi
layerrule = ignorezero,rofi
layerrule = blur,lockscreen
layerrule = blur,notifications
layerrule = ignorezero,notifications
windowrulev2 = opacity 0.0 override 0.0 override,class:^(xwaylandvideobridge)$
windowrulev2 = noanim,class:^(xwaylandvideobridge)$
windowrulev2 = nofocus,class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus,class:^(xwaylandvideobridge)$

# Blur
windowrule = opacity 1.0 override 0.6 override, ^(kitty)$
windowrule = opacity 1.0 override 0.6 override, ^(kitty-float)$
windowrule = opacity 1.0 override, firefox
windowrule = noblur, firefox
